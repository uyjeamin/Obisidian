**트렌젝션이란?**
>특정한 작업을 전부 처리하거나 전부 실패하게 만들어 작업의 일관성을 보장해주는 작업의 단위이다.  트랜잭션을 사용함으로서 데이터 일관성을 보장할수 있다.

**간단히 말해서 sql 질의어를 사용자가 원하는 만큼을 단위로 묶는것 이다.**

**생겨난 이유**
만약 이체를 예로 들면, ``1. 계좌에서 돈이 차감된다. 2. 다른 계좌에 돈이 더해진다``
이러한 과정이 있는데 여기서 1번은 실행 됬는데 2번이 실행되지 않으면 큰일난다. 

그래서 작업을 단위를 1번, 2번을 합친다. 
이러한 작업 단위를 하나의 트랜잭션이라 한다.


트랜잭션의 특징이라고 할수있는 ACID 에 대해서 알아보자.

## ACID 란?
>DB 에서 트랜잭션이 안전하게 수행된다는 것을 보장하기 위한 특징들을 나열해 놓은 것이다.
= 트랜잭션의 특징

이 특징들은 아래와 같다.
* **원자성(Atomictiy)**
* **일관성(Consistency)**
* **격리성(lsolation)**
* **영속성(Durability)**

#### 원자성(Atomictiy)

>트랜잭션이 모두 성공하거나 모두 실패헤야 한다.

실행되는 쿼리를 하나의 작업 단위로 보지않고, 여러개 작업들을 묶어 하나의 작업단위로 본다.

성공시 -> COMMIT 연산을 통해 DB 에 저장
실패시 -> ROLLBACK 연산을 통해 

#### 일관성(Consistency)

> 트랜잭션의 작업 처리 결과가 항상 일관성 있어야 한다.

DB 에 일관성있는 규칙을 정해놨으면 트랜잰션이 완료됬어도 그 일관성을 유지해야 한다는것(그 규칙을 바꾸면 안된다는 것.)

ex: 송금시 데이터를 정수형(integer) 에서 문자열(string) 으로 변경할 수 없다는 것이다.


#### 독립성(isolation)

>만약 둘 이상의 트랜잭션이 동시에 연산되고 있을 때 어떤 트랜잭션이든 다른 트랜잭션의 연산에 끼어들 수 없다는 것이다.

#### 영속성(Durabilit)

>완료된 결과는 DB 에 영구저장됨 -> 데이터 손상X

안정성을 유지하는데 중요한 역활을 한다.


## 트랜잭션의 연산

1) **COMMIT 연산**
COMMIT 연산을 통해 트랜잭션이 최종적으로 성공했다는 것을 선언하고 그 결과를 최종 DB 에 반영함.

2. **ROLLBACK 연산**
**트랜잭션 수행에 실패했음을 선언하고 작업을 취소하는 연산** 트랜잭션 연산 도중 하나라도 처리하지 못한 상황이면 ``ROLLBACK`` 연산을 실행하여 실패했음을 선언, DB 에 트랜잭션 수행 전과 동일한 상태로 되돌려 놓음.

## 트랜잭션의 상태
![[Pasted image 20240802101910.png]]

![[Pasted image 20240802101917.png]]

1. Begin Transaction : 트랜잭션의 